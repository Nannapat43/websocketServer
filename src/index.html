<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <title>WebSocket Client</title>
</head>
<body>
  <h1>WebSocket Show Status</h1>
  <div id="messages"></div>
 
 <script>
    const ws = new WebSocket('ws://localhost:8080');  //เชื่อมต่อกับ server

    ws.addEventListener('open', () => {  // event เมื่อ websocket เชื่อมต่อได้
      console.log('Connected to server'); // เชื่อมต่อกับ server ได้ให้แสดงข้อความที่ใส่
    });

    ws.addEventListener('message', (event) => { // เมื่อได้รับข้อความจาก server
      console.log('Received message:', event.data);  
      event.data.text().then(message => {   // ใช้ medthod text ทำการแปลงข้อมูลจาก binary เป็นข้อความที่ได้รับมา
        const messagesDiv = document.getElementById('messages'); 
        messagesDiv.innerHTML += `<p>${message}</p>`; 
      });
    });

    ws.addEventListener('close', () => { //  ถ้าหยุดทำงาน
      console.log('Disconnected from server'); // แสดงข้อความ
    });

    ws.addEventListener('error', (error) => { // ถ้าเกิด error
      console.log('WebSocket error:', error); // แสดงข้อความ
    });
  </script>
</body>
